(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{132:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},161:function(e,t,c){},162:function(e,t,c){},163:function(e,t,c){},170:function(e,t,c){},175:function(e,t,c){},176:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(0),r=c.n(n),a=c(20),o=c.n(a),i=(c(132),c(55)),j=c(22),l=c(24),d=c(14),b=c(179),h=c(180),u=c(120),x=c(183),O=c(181),p=(c(133),c(189)),m=c(64),f=c(40),g=c(184),v=c(185),y=c(187),w=c(188),N=(c(134),c(79),function(e){e.user;return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(f.a,{sm:14,md:10,lg:8,xl:6,children:Object(s.jsxs)("div",{className:"brand",style:{fontSize:"22px",fontFamily:"Impact",color:"white"},children:[Object(s.jsx)("img",{src:"https://res.cloudinary.com/dk4w6vkbg/image/upload/v1607899786/craiglist/house_ravgbp.jpg",alt:"icon",style:{width:"2rem",marginRight:"10px"}}),"CRAIGCLONE"]})}),Object(s.jsx)(f.a,{sm:2,md:3,lg:5,xl:6,children:Object(s.jsxs)(g.a,{theme:"dark",mode:"horizontal",style:{background:"#fcaf58"},children:[Object(s.jsxs)(g.a.Item,{className:"select",children:[Object(s.jsx)(y.a,{}),Object(s.jsx)("span",{children:Object(s.jsx)(l.c,{to:"/home",children:"Home"})})]},"1"),Object(s.jsxs)(g.a.Item,{className:"select",children:[Object(s.jsx)(w.a,{}),Object(s.jsx)("span",{children:Object(s.jsx)(l.c,{to:"/Following",children:"My Following"})})]},"2")]})}),Object(s.jsx)(f.a,{sm:0,md:8,xl:6,children:Object(s.jsx)("div",{})}),Object(s.jsx)(f.a,{sm:8,md:5,xl:4,children:Object(s.jsxs)(v.a,{onClick:function(){fetch("auth/logout",{method:"POST"}),window.location.href="/"},ghost:!0,children:[" ","Log Out"]})})]})}),S=c(178),C=S.a.Header,I=S.a.Content,k=function(e){var t=new URLSearchParams(window.location.search).get("username");null!==t&&void 0!==t&&localStorage.setItem("username",t);var c=Object(n.useState)("1"),r=Object(j.a)(c,2),a=r[0],o=r[1],i=Object(n.useState)("---"),l=Object(j.a)(i,2),m=l[0],f=l[1],g=Object(n.useState)("---"),v=Object(j.a)(g,2),y=v[0],w=v[1],k=Object(n.useState)(""),$=Object(j.a)(k,2),F=$[0],P=$[1],B=Object(d.f)();return Object(s.jsxs)(S.a,{children:[Object(s.jsx)(C,{style:{background:"#fcaf58"},children:Object(s.jsx)(N,{user:e.user})}),Object(s.jsx)("div",{className:"back",children:Object(s.jsx)(I,{children:Object(s.jsx)(b.a,{fluid:!0,className:"homepage-container",children:Object(s.jsxs)(b.a,{children:[Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:2},className:"p-0",children:Object(s.jsxs)("div",{className:"welcome",children:["Dear ",e.user,", "]})})}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:2},className:"p-0",children:Object(s.jsx)("h1",{className:"subwelcome",children:"Moving is a start of a new journey."})})}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:2},className:"p-0",children:Object(s.jsxs)("h1",{className:"subwelcome",children:["Today, let me help you find your new place."," "]})})}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:2},className:"search-form-container p-2 search-form-container",children:Object(s.jsxs)(x.a,{children:[Object(s.jsx)(x.a.Group,{controlId:"room",children:Object(s.jsxs)("label",{for:"inputAddress",style:{fontFamily:"Brush Script MT, Brush Script Std, cursive",fontSize:"30px"},children:["Neighborhood",Object(s.jsx)(x.a.Control,{type:"neighbor",placeholder:"San Francisco",onChange:function(e){return P(e.target.value)}})]})}),Object(s.jsxs)(x.a.Row,{children:[Object(s.jsx)(u.a,{children:Object(s.jsxs)(x.a.Group,{controlId:"neighbor",children:[Object(s.jsx)(x.a.Label,{style:{fontFamily:"Brush Script MT, Brush Script Std, cursive",fontSize:"30px"},children:"Bedroom number:"}),Object(s.jsxs)(x.a.Control,{as:"select",size:"sm",custom:!0,onChange:function(e){return o(e.target.value)},children:[Object(s.jsx)("option",{children:"1"}),Object(s.jsx)("option",{children:"2"}),Object(s.jsx)("option",{children:"3"}),Object(s.jsx)("option",{children:"4"}),Object(s.jsx)("option",{children:"5"})]})]})}),Object(s.jsx)(u.a,{children:Object(s.jsxs)(x.a.Group,{controlId:"price-from-group",children:[Object(s.jsx)(x.a.Label,{style:{fontFamily:"Brush Script MT, Brush Script Std, cursive",fontSize:"30px"},children:"By price from:"}),Object(s.jsxs)(x.a.Control,{as:"select",size:"sm",custom:!0,onChange:function(e){return f(e.target.value)},children:[Object(s.jsx)("option",{children:"$0"}),Object(s.jsx)("option",{children:"$1000"}),Object(s.jsx)("option",{children:"$1500"}),Object(s.jsx)("option",{children:"$2000"}),Object(s.jsx)("option",{children:"$2500"}),Object(s.jsx)("option",{children:"$2500"}),Object(s.jsx)("option",{children:"$3000"}),Object(s.jsx)("option",{children:"$3500"}),Object(s.jsx)("option",{children:"$4000"}),Object(s.jsx)("option",{children:"$4500"}),Object(s.jsx)("option",{children:"$5000"})]})]})}),Object(s.jsx)(u.a,{children:Object(s.jsxs)(x.a.Group,{controlId:"price-to-group",children:[Object(s.jsx)(x.a.Label,{style:{fontFamily:"Brush Script MT, Brush Script Std, cursive",fontSize:"30px"},children:"By price to:"}),Object(s.jsxs)(x.a.Control,{as:"select",size:"sm",custom:!0,onChange:function(e){return w(e.target.value)},children:[Object(s.jsx)("option",{children:"$1000"}),Object(s.jsx)("option",{children:"$1500"}),Object(s.jsx)("option",{children:"$2000"}),Object(s.jsx)("option",{children:"$2500"}),Object(s.jsx)("option",{children:"$2500"}),Object(s.jsx)("option",{children:"$3000"}),Object(s.jsx)("option",{children:"$3500"}),Object(s.jsx)("option",{children:"$4000"}),Object(s.jsx)("option",{children:"$4500"}),Object(s.jsx)("option",{children:"$5000"}),Object(s.jsx)("option",{children:"$5500"}),Object(s.jsx)("option",{children:"$6000"}),Object(s.jsx)("option",{children:"---"})]})]})})]}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{offset:.1},children:Object(s.jsxs)(O.a,{variant:"primary",onClick:function(){var e,t;e=""===m?0:parseInt(m.substring(1)),t=""===y?1e7:parseInt(y.substring(1));var c="/posts?neighborhood=".concat(encodeURIComponent(F),"&rooms=").concat(encodeURIComponent(a),"&minPrice=").concat(encodeURIComponent(e),"&maxPrice=").concat(encodeURIComponent(t),"&page=").concat(encodeURIComponent(1));B.push(c)},style:{fontFamily:"Brush Script MT, Brush Script Std, cursive",fontSize:"25px"},children:[Object(s.jsx)(p.a,{}),"Search"]})})})]})})}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:7},className:"p-0",children:Object(s.jsx)("h1",{className:"subwelcome",children:"Best,"})})}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:{span:6,offset:5},className:"p-0",children:Object(s.jsx)("h1",{className:"subwelcome",children:"Your friend, Xintong"})})})]})})})})]})};c(161),c(56);var $=function(){var e=new URLSearchParams(window.location.search).get("username");return localStorage.setItem("username",e),console.log("username"),console.log(localStorage.getItem("username")),Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"SignIn",children:Object(s.jsx)("div",{className:"container-fluid d-flex justify-content-center",children:Object(s.jsxs)("div",{className:"signcard",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsx)("div",{className:"card-h3",children:"Sign In"})}),Object(s.jsx)("div",{className:"card-body",children:Object(s.jsxs)("form",{action:"/auth/login",method:"POST",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"inputEmail",children:"Email"}),Object(s.jsx)("input",{type:"text",id:"email",className:"form-control",placeholder:" ",name:"email"})]}),Object(s.jsxs)("div",{className:"form group",children:[Object(s.jsx)("label",{for:"inputPassword",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:" ",name:"password"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Sign In"}),Object(s.jsxs)("div",{className:"form-group",children:["Not an user yet?"," ",Object(s.jsx)(l.b,{className:"card-footerText",to:"/signup",children:"Sign Up"}),Object(s.jsx)("br",{})]})]})})]})})})})};c(162);var F=function(){return Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"SignIn",children:Object(s.jsx)("div",{className:"container-fluid d-flex justify-content-center",children:Object(s.jsxs)("div",{className:"signcard",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsx)("div",{className:"card-h3",children:"Sign Up"})}),Object(s.jsx)("div",{className:"card-body",children:Object(s.jsxs)("form",{action:"/auth/register",method:"POST",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"username",children:"Username"}),Object(s.jsx)("input",{type:"text",id:"username",className:"form-control",placeholder:" ",name:"username"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"email",children:"Email"}),Object(s.jsx)("input",{type:"text",id:"email",className:"form-control",placeholder:" ",name:"email"})]}),Object(s.jsxs)("div",{className:"form group",children:[Object(s.jsx)("label",{for:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",className:"form-control",placeholder:" ",name:"password"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Sign up"}),Object(s.jsxs)("div",{className:"form-group",children:["Already an user?"," ",Object(s.jsx)(l.b,{className:"card-footerText",to:"/signin",children:"Sign In"}),Object(s.jsx)("br",{})]})]})})]})})})})},P=c(27),B=c.n(P),T=c(47),L=c(95),R=c(186),U=c(182),z=(c(163),"300x300"),E=U.a.Meta,M=function(e){var t,c,n=e.post.price?"$".concat(e.post.price):"$0",r=(t=e.post.images[0],c=z,"https://images.craigslist.org/".concat(t,"_").concat(c,".jpg"));return Object(s.jsx)(f.a,{className:"card-list",sm:12,md:8,lg:6,children:Object(s.jsx)(l.b,{to:"/getContent/"+e.post._id,children:Object(s.jsx)(U.a,{hoverable:!0,style:{overflow:"hidden"},cover:Object(s.jsx)("img",{src:r,alt:""}),size:"small",children:Object(s.jsx)(E,{title:e.post.title,description:Object(s.jsxs)("span",{children:["by: ",e.post.author,Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:["address:",e.post.address]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:["price:",n]})]})})})},e.post._id)})},A=(c(170),"300x300"),_=function(e,t){return"https://images.craigslist.org/".concat(e,"_").concat(t,".jpg")},H=S.a.Header,G=S.a.Content,D=function(e){var t=Object(d.g)(),c=Object(n.useState)([]),r=Object(j.a)(c,2),a=r[0],o=r[1],i=Object(n.useState)(1),l=Object(j.a)(i,2),b=l[0],h=l[1],u=Object(n.useState)(-1),x=Object(j.a)(u,2),O=x[0],p=x[1],f=function(){var e=Object(T.a)(B.a.mark((function e(){var c,s,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("fetch url: ".concat("/posts"+t.search)),e.next=4,fetch("/posts"+t.search);case 4:return c=e.sent,e.next=7,c.json();case 7:s=e.sent,console.log(s),n=new URLSearchParams(t.search),r=s.apartments,a=parseInt(s.pages),i=parseInt(n.get("page")),p(i),o(r),h(a),console.log("url(".concat(_(s.apartments[0].images[0],A),")")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}var r,a,i}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){e<1&&(e=1),e>b&&(e=b);var c=new URLSearchParams(t.search);return c.set("page",e),c.toString()};return Object(n.useEffect)((function(){f()}),[]),Object(s.jsxs)(S.a,{children:[Object(s.jsx)(H,{style:{background:"#fcaf58"},children:Object(s.jsx)(N,{user:e.user})}),Object(s.jsxs)(G,{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)("div",{style:{padding:"10px",margin:"0 0 0 20px"},children:[Object(s.jsx)("span",{style:{margin:"0 10px 0 0"},children:"Sort by:"}),Object(s.jsxs)("select",{onChange:function(e){"lowest"===e.target.value?(console.log("lowest"),a.sort((function(e,t){return e.price-t.price})),o(Object(L.a)(a))):"highest"===e.target.value&&(console.log("highest"),a.sort((function(e,t){return t.price-e.price})),o(Object(L.a)(a)))},className:"dropdown-main",children:[Object(s.jsx)("option",{value:"lowest",children:"Lowest price"}),Object(s.jsx)("option",{value:"highest",children:"Highest price"})]})]}),Object(s.jsx)("br",{})]}),Object(s.jsx)(m.a,{children:a.map((function(e,t){return Object(s.jsx)(M,{post:e},e._id)}))}),Object(s.jsx)(m.a,{justify:"center",children:Object(s.jsxs)(R.a,{children:[Object(s.jsx)(R.a.First,{href:"/posts?".concat(g(1))}),Object(s.jsx)(R.a.Prev,{href:"/posts?".concat(g(O-1))}),Object(s.jsx)(R.a.Item,{active:!0,href:"/posts?".concat(g(O)),children:O}),Object(s.jsx)(R.a.Next,{href:"/posts?".concat(g(O+1))}),Object(s.jsx)(R.a.Last,{href:"/posts?".concat(g(b))})]})})]})]})},J=c(84),W=(c(110),c(175),c(190)),K=c(191),X=S.a.Header,Y=S.a.Content,q=function(e){var t=Object(d.h)().houseId,c=Object(n.useState)(null),r=Object(j.a)(c,2),a=r[0],o=r[1],i=Object(n.useState)([]),l=Object(j.a)(i,2),x=l[0],O=l[1],p=function(){var c=Object(T.a)(B.a.mark((function c(){var s,n;return B.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("/posts/getAnnotations?postId=".concat(encodeURIComponent(t),"&username=").concat(encodeURIComponent(e.user)));case 2:return s=c.sent,c.next=5,s.json();case 5:n=c.sent,O(n);case 7:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),m=function(){var e=Object(T.a)(B.a.mark((function e(t){var c,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/getContent/".concat(t));case 2:return c=e.sent,e.next=5,c.json();case 5:s=e.sent,o(s.house);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m(t),p()}),[x]),a?Object(s.jsxs)(S.a,{children:[Object(s.jsx)(X,{style:{background:"#fcaf58"},children:Object(s.jsx)(N,{user:e.user})}),Object(s.jsx)(Y,{children:Object(s.jsx)(b.a,{children:Object(s.jsxs)(h.a,{className:"justify-content-center",children:[Object(s.jsxs)("h1",{className:"post-title",children:[a.title," - $",a.price,"/month"," "]}),Object(s.jsx)(u.a,{xs:6,children:Object(s.jsxs)("div",{className:"image-carousel__outer",children:[Object(s.jsx)(J.Carousel,{showArrows:!0,infiniteLoop:!0,useKeyboardArrows:!0,children:a.images.map((function(e,t){return Object(s.jsx)("img",{src:_(e,A),alt:""},t.toString())}))}),Object(s.jsx)(h.a,{children:Object(s.jsx)(u.a,{xs:12,children:Object(s.jsxs)("form",{action:"/posts/addAnnotations",method:"POST",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"inputComment",children:"Write down your note for this:"}),Object(s.jsx)("input",{type:"text",id:"comment",className:"form-control",placeholder:" ",name:"comment"}),Object(s.jsx)("input",{type:"hidden",name:"postId",value:t,id:"postId"}),Object(s.jsx)("input",{type:"hidden",name:"username",value:e.user,id:"username"})]}),Object(s.jsxs)("button",{type:"submit",className:"btn btn-dark",children:[Object(s.jsx)(W.a,{})," Write"]}),Object(s.jsx)("div",{className:"comments",children:x.map((function(e,t){return Object(s.jsxs)("div",{children:[e.comment," is written by you at \xa0",e.time," "]})}))})]})})}),Object(s.jsx)(h.a,{children:Object(s.jsxs)(u.a,{xs:12,children:[" ",Object(s.jsxs)("form",{action:"/users/updateFollowing",method:"post",children:[Object(s.jsx)("input",{type:"hidden",name:"username",id:e.user,value:e.user}),Object(s.jsx)("input",{type:"hidden",name:"following",id:a.author,value:a.author}),Object(s.jsxs)("button",{type:"submit",className:"btn btn-dark",style:{},children:[Object(s.jsx)(K.a,{})," Follow the author"," ",a.author]})]})]})}),Object(s.jsx)("div",{className:"postingbody",children:a.body})]})})]})})})]}):Object(s.jsx)("main",{})},Q=S.a.Header,V=S.a.Content,Z=function(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),r=c[0],a=c[1],o=function(){var t=Object(T.a)(B.a.mark((function t(){var c,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/userFollwing?username=".concat(encodeURIComponent(e.user)));case 2:return c=t.sent,t.next=5,c.json();case 5:s=t.sent,a(s.following);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[r]),Object(s.jsxs)(S.a,{children:[Object(s.jsx)(Q,{style:{background:"#fcaf58"},children:Object(s.jsx)(N,{user:e.user})}),Object(s.jsx)(V,{children:Object(s.jsx)(b.a,{children:Object(s.jsx)("div",{style:{display:"inline-grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginTop:"10px"},children:r.map((function(e,t){return Object(s.jsx)("div",{style:{width:"300px"},children:Object(s.jsxs)("a",{href:"/author/"+e,children:["\ud83d\udc49 Click to See ",e," Posts \ud83d\udc48"]})})}))})})})]})},ee=S.a.Header,te=S.a.Content,ce=function(){var e=Object(d.h)().author,t=Object(n.useState)(null),c=Object(j.a)(t,2),r=c[0],a=c[1],o=function(){var e=Object(T.a)(B.a.mark((function e(t){var c,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("/posts/getList/"+t);case 3:return c=e.sent,e.next=6,c.json();case 6:s=e.sent,a(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o(e)}),[]),r?Object(s.jsxs)(S.a,{children:[Object(s.jsx)(ee,{style:{background:"#fcaf58"},children:Object(s.jsx)(N,{})}),Object(s.jsx)(te,{children:Object(s.jsx)(b.a,{children:Object(s.jsx)(h.a,{className:"justify-content-center",children:Object(s.jsx)("h1",{className:"post-title",children:r.map((function(e,t){return Object(s.jsx)("div",{children:Object(s.jsxs)("a",{href:"/getContent/"+e.id,children:["\ud83d\udc49 Click to See ",e.title,"\ud83d\udc48"]})})}))})})})})]}):Object(s.jsx)("main",{})};var se=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("username");e&&r(e)}),[]),Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(l.a,{children:Object(s.jsxs)(d.c,{children:[Object(s.jsx)(d.a,{exact:!0,path:"/",component:$}),Object(s.jsx)(d.a,{path:"/signin",component:$}),Object(s.jsx)(d.a,{path:"/signup",component:F}),Object(s.jsx)(d.a,{path:"/home",render:function(e){return Object(s.jsx)(k,Object(i.a)(Object(i.a)({},e),{},{user:c}))}}),Object(s.jsx)(d.a,{path:"/posts",component:D}),Object(s.jsx)(d.a,{path:"/Following",render:function(e){return Object(s.jsx)(Z,Object(i.a)(Object(i.a)({},e),{},{user:c}))}}),Object(s.jsx)(d.a,{path:"/getContent/:houseId",render:function(e){return Object(s.jsx)(q,Object(i.a)(Object(i.a)({},e),{},{user:c}))}}),Object(s.jsx)(d.a,{path:"/author/:author",component:ce})]})})})})},ne=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,192)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(se,{})}),document.getElementById("root")),ne()}},[[176,1,2]]]);
//# sourceMappingURL=main.a613cfa6.chunk.js.map